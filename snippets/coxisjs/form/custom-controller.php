<?php	public function configForm() {		$this->form = new Form(			'contactform', 			array(				'method'	=>	'post',				'action'	=>	'contact',			),			array(				'souhaitez'		=>						new Widget(array(						//~ 'default'			=>	'en',						'choices'	=>	array(							'renseignement'		=>	'Un renseignement',							'adherer'	=>	'Adhérer à l\'ARPA',						),						'multiple'	=>	true,						'rules'				=>	array(							'required'		=>	true,						),					)),				'nom'		=>					new Widget(array(						'rules'	=>	array(							'required'	=>	true,						)					)),				'prenom'		=>					new Widget(array(						'rules'	=>	array(							'required'	=>	true,						)					)),				'telephone'		=>					new Widget(array(						'rules'	=>	array(							'required'	=>	true,						)					)),				'email'		=>					new Widget(array(						'rules'	=>	array(							'required'	=>	true,							'regex'	=>	'/^[\w-]+(\.[\w-]+)*@([a-z0-9-]+(\.[a-z0-9-]+)*?\.[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})(:\d{4})?$/',						)					)),				'question'		=>					new Widget(array(						'rules'	=>	array(							//~ 'required'	=>	true,							'length'	=>	600,						)					)),			)		);	}		/**	@Route('contact')	*/	public function contactAction($request) {		$this->configForm();				if($this->form->isSent()) {			if(!($errors = $this->form->errors())) {				$data = $this->form->getData();				$text = 'Souhaite : '.implode(', ', $data['souhaitez'])."\n".				'Nom : '.$data['nom']."\n".				'Prénom : '.$data['prenom']."\n".				'Téléphone : '.$data['telephone']."\n".				'E-mail : '.$data['email']."\n".				'Question : '.$data['question']."\n";								Email::generate(MySettings::get('email'), 'Arpa : Contact', $data['email'], $text)->send();								Response::setCode(200)->send();			}			else {				Response::setCode(500)->sendHeaders();				foreach($errors as $err)					echo $err."\n";				Response::send();			}		}	}